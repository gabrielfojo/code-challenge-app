(function(t){function e(e){for(var i,n,l=e[0],r=e[1],d=e[2],m=0,u=[];m<l.length;m++)n=l[m],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&u.push(s[n][0]),s[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);c&&c(e);while(u.length)u.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,l=1;l<a.length;l++){var r=a[l];0!==s[r]&&(i=!1)}i&&(o.splice(e--,1),t=n(n.s=a[0]))}return t}var i={},s={app:0},o=[];function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/vue/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var c=r;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1505:function(t,e,a){t.exports=a.p+"img/gray.314c700b.jpg"},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mx-auto ",attrs:{id:"app"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeModal(e)}}},[a("h1",[t._v("My App")]),a("div",[a("draggable",{staticClass:"grid grid-cols-2 gap-4",attrs:{group:"people"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1},change:t.reorder},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,(function(e){return a("List",{key:e._id,staticClass:"col-span-2 md:col-span-1 ",attrs:{item:e},on:{edit:function(a){return t.edit(e._id)},remove:function(a){return t.remove(e._id)}}})})),1)],1),a("hr"),a("footer",{staticClass:"p-4"},[a("div",{staticClass:"inline-block py-2 px-4 rounded border-l-2 border-orange-500"},[t._v(" "+t._s(t.items.length)+" items ")]),a("button",{staticClass:"btn",on:{click:this.add}},[t._v(" Add ")])]),t.showModal?a("Modal",{attrs:{modal:t.modal},on:{save:t.save}}):t._e()],1)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:" bg-gray-100 grid grid-cols-3 gap-4 mb-4 mt-4 shadow"},[a("div",{staticClass:"col-span-1 p-4"},[a("img",{attrs:{alt:"Picture",src:t.image}})]),a("div",{staticClass:"col-span-2 p-4"},[a("h1",[t._v(t._s(t.item.title))]),a("p",{staticClass:"mb-2"},[t._v(t._s(t.item.text))]),a("button",{staticClass:"btn mr-2",on:{click:this.edit}},[t._v("Edit")]),a("button",{staticClass:"btn",on:{click:this.remove}},[t._v(" Delete ")])])])},l=[],r=a("1505"),d=a.n(r),c={name:"List",props:["item","ix"],data(){return{}},methods:{edit(){this.$emit("edit")},remove(){this.$emit("remove")}},computed:{image:function(){return this.item.image?"http://172.28.0.10:3040/images/"+this.item.image:d.a}}},m=c,u=a("2877"),p=Object(u["a"])(m,n,l,!1,null,null,null),h=p.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fixed inset-0 w-auto mx-32 h-screen flex items-center justify-center bg-semi-75 "},[a("div",{staticClass:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 "},[a("form",[a("div",{staticClass:"grid grid-cols-4"},[a("div",{staticClass:"col-span-1"},[a("img",{staticClass:"m-2 ml-0",attrs:{id:"myModal_thumbnail",src:t.modal.thumb}}),a("input",{staticClass:"hidden",attrs:{type:"file",name:"",id:"image1"},on:{change:t.updateThumb}}),a("div",{staticClass:"flex items-left mt-3"},[a("button",{staticClass:"btn w-full",attrs:{type:"button"},on:{click:t.getFile}},[t._v(" Pick file ")])])]),a("div",{staticClass:"col-span-3 ml-4"},[a("div",{staticClass:"mt-2 mb-4"},[a("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2",attrs:{for:"title"}},[t._v(" Title ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.modal.title,expression:"modal.title"}],staticClass:" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"title",type:"text",placeholder:"Title"},domProps:{value:t.modal.title},on:{input:function(e){e.target.composing||t.$set(t.modal,"title",e.target.value)}}})]),a("div",{staticClass:"mb-4"},[a("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2",attrs:{for:"text"}},[t._v(" Text ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.modal.text,expression:"modal.text"}],staticClass:"shadow appearance-none border  rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"text",type:"text",placeholder:"A penny for your thoughts..."},domProps:{value:t.modal.text},on:{input:function(e){e.target.composing||t.$set(t.modal,"text",e.target.value)}}})]),a("div",{staticClass:"grid grid-cols-2"},[a("button",{staticClass:"btn w-full",attrs:{type:"button"},on:{click:t.save}},[t._v(" Save ")]),a("span",{staticClass:"pt-2  text-right pr-2",class:t.textClass()},[t._v(t._s(300-t.modal.text.length))])])])]),a("div",{staticClass:"mb-6"}),t.modal.error?a("span",[t._v(" "+t._s(t.modal.error)+" ")]):t._e()])])])},f=[];const v=300;var b={name:"Modal",props:["modal"],data(){return{}},methods:{save(){this.$emit("save",this.modal)},textClass(){let t="",e=v-this.modal.text.length;return t=e<100?"text-red-700":e<200?"text-orange-700":"text-green-700",t},getFile(){const t=document.querySelector("#image1");t.click()},updateThumb(t){const e=t.target,a=["image/jpeg","image/gif","image/png"],i=this;if(e.files&&e.files[0]){if(!a.includes(e.files[0].type))return console.log(">Try again.."),this.modal.thumb="",!1;var s=new FileReader;s.onload=function(t){var e=new Image;e.src=t.target.result,e.onload=function(){var e=this.height,a=this.width;if(320!=e||320!==a)return i.modal.error="Image 320x320 please",!1;i.modal.thumb=t.target.result}},s.readAsDataURL(e.files[0])}}}},x=b,y=Object(u["a"])(x,g,f,!1,null,null,null),_=y.exports,w=a("bc3a"),C=a.n(w),k=a("2ef0"),M=a.n(k),j=a("310e"),O=a.n(j);const P="http://172.28.0.10:3040";var S={name:"App",components:{List:h,Modal:_,draggable:O.a},data(){return{items:[],showModal:!1,modal:{title:"",text:"",image:"",id:"",thumb:d.a,error:""}}},computed:{},created(){this.init()},methods:{closeModal(){this.showModal=!1},reorder(t){const e=this.items[t.moved.oldIndex];C.a.put(P+"/api/items/"+t.moved.element._id,{order:t.moved.newIndex+1}),C.a.put(P+"/api/items/"+e._id,{order:t.moved.oldIndex+1})},init(){const t=this;C.a.get(P+"/api/items").then((function(e){e.data.forEach(e=>{t.items.push(e)})})).catch(console.log)},edit(t){this.showModal=!0;const e=M.a.find(this.items,(function(e){return e._id==t}));this.modal.id=e._id,this.modal.title=e.title,this.modal.text=e.text,this.modal.image=e.image,this.modal.thumb=e.image?P+"/images/"+e.image:d.a},add(){this.showModal=!0,this.modal.id="",this.modal.title="",this.modal.text="",this.modal.image="",this.modal.thumb=""},remove(t){C.a.delete(P+"/api/items/"+t).then(()=>{this.items=M.a.filter(this.items,(function(e){return e._id!==t})),this.showModal=!1}).catch(console.log)},save(t){if(t.id){const e=new FormData,a=document.querySelector("#image1").files[0];a&&e.append("image",a),e.append("text",t.text),e.append("title",t.title),C.a.put(P+"/api/items/"+t.id,e).then(e=>{const i=this,s=M.a.find(this.items,(function(t){return t._id==i.modal.id}));s.title=t.title,s.text=t.text,a&&(s.image=e.data.image),this.showModal=!1}).catch(console.log)}else{const e=new FormData;e.append("image",document.querySelector("#image1").files[0]),e.append("text",t.text),e.append("title",t.title),e.append("order",this.items.length+1),C.a.post(P+"/api/items/",e).then(t=>{this.items.push(t.data),this.showModal=!1}).catch(console.log)}}}},T=S,$=Object(u["a"])(T,s,o,!1,null,null,null),E=$.exports;a("c898");i["a"].config.productionTip=!1,new i["a"]({render:t=>t(E)}).$mount("#app")},c898:function(t,e,a){}});
//# sourceMappingURL=app.82aacd1a.js.map